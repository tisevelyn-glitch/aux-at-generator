<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adobe Target Activity Generator</title>
    <!-- Design System: Pretendard (한글 가독성) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">
    <link rel="stylesheet" href="style.css">
    <!-- 다크모드 초기 깜빡임 방지 -->
    <script>
        (function () {
            var theme = localStorage.getItem('theme');
            if (theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        })();
    </script>
</head>
<body>
    <button type="button" class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
        <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
        <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" style="display: none;">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
    </button>

    <div class="container">
        <header>
            <h1 class="hero-title">Adobe Target Activity Generator</h1>
            <p class="subtitle">HTML Offer creation and A/B Test activity automation tool</p>
            <nav class="tab-nav" role="tablist">
                <button type="button" class="tab-btn active" data-tab="create" role="tab" aria-selected="true">Create</button>
                <button type="button" class="tab-btn" data-tab="my-content" role="tab" aria-selected="false">My Activities & Offers</button>
            </nav>
        </header>

        <!-- 탭: Create -->
        <div id="tab-create" class="tab-panel" role="tabpanel" aria-hidden="false">
        <!-- Workspace -->
        <section class="card">
            <div class="card-header">
                <h2>Workspace</h2>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="workspaceSelect">Select workspace</label>
                    <select id="workspaceSelect" class="form-control">
                        <option value="">— Select workspace —</option>
                    </select>
                </div>
                <div id="tokenStatus" class="status-message"></div>
            </div>
        </section>

        <!-- Offer -->
        <section class="card">
            <div class="card-header">
                <h2>Offer</h2>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="offerType">Mode</label>
                    <select id="offerType" class="form-control">
                        <option value="create">Create new offer</option>
                        <option value="existing">Use existing offer</option>
                    </select>
                </div>

                <div id="offerCreateSection">
                    <div class="form-group">
                        <label for="offerName">Offer name</label>
                        <input type="text" id="offerName" class="form-control" placeholder="Enter offer name">
                    </div>
                    <div class="form-group">
                        <label for="offerContent">HTML content</label>
                        <textarea id="offerContent" class="form-control" rows="5" placeholder="<div>Enter HTML content</div>"></textarea>
                    </div>
                </div>

                <div id="offerSelectSection" style="display: none;">
                    <div class="form-group">
                        <label for="offerIdInput">Search by Offer ID</label>
                        <div class="offer-search-row">
                            <input type="text" id="offerIdInput" class="form-control" placeholder="Enter Offer ID">
                            <button type="button" id="offerSearchBtn" class="btn btn-small">Search</button>
                        </div>
                    </div>
                    <div id="offerSearchResult" class="offer-result-card" style="display: none;">
                        <div class="offer-result-header">Offer details</div>
                        <div id="offerResultBody" class="offer-result-body"></div>
                    </div>
                    <div id="offerSearchEmpty" class="offer-result-empty" style="display: none;">Enter an Offer ID and click Search.</div>
                </div>
            </div>
        </section>

        <!-- Activity -->
        <section class="card">
            <div class="card-header">
                <h2>Activity</h2>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="activityName">Activity name</label>
                    <input type="text" id="activityName" class="form-control" placeholder="Enter activity name" required>
                </div>
                <div class="form-group">
                    <label for="activityStatus">Activity state</label>
                    <select id="activityStatus" class="form-control">
                        <option value="saved">Saved</option>
                        <option value="archived">Archived</option>
                    </select>
                </div>
                <button id="executeBtn" class="btn btn-success" disabled>Run automation</button>
            </div>
        </section>

        <!-- Result -->
        <section class="card">
            <div class="card-header">
                <h2>Result</h2>
            </div>
            <div class="card-body">
                <div id="result" class="result-box"></div>
            </div>
        </section>
        </div>
        <!-- /tab-create -->

        <!-- 탭: My Activities & Offers -->
        <div id="tab-my-content" class="tab-panel" role="tabpanel" aria-hidden="true" style="display: none;">
            <section class="card">
                <div class="card-header">
                    <h2>All workspaces</h2>
                </div>
                <div class="card-body">
                    <button type="button" id="myContentLoadBtn" class="btn btn-primary">Load all Activities & Offers</button>
                    <div id="myContentStatus" class="status-message" style="margin-top: 12px;"></div>
                </div>
            </section>
            <section class="card">
                <div class="card-header">
                    <h2>Activities</h2>
                </div>
                <div class="card-body">
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label for="activityNameFilter">Filter by Activity name</label>
                        <input type="text" id="activityNameFilter" class="form-control" placeholder="Search activity name...">
                    </div>
                    <div class="activity-toolbar" style="margin-bottom: 12px;">
                        <button type="button" id="activityEditBtn" class="btn btn-small">선택 수정</button>
                        <button type="button" id="activityDeleteBtn" class="btn btn-small">선택 삭제</button>
                    </div>
                    <div id="myActivitiesStatus" class="status-message" style="margin-bottom: 12px; display: none;"></div>
                    <div id="myActivitiesList" class="content-list content-list-with-ws"></div>
                </div>
            </section>
            <div id="activityEditModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="activityEditModalTitle" style="display: none;">
                <div class="modal-card">
                    <div class="modal-header">
                        <h3 id="activityEditModalTitle">Edit Activity</h3>
                        <button type="button" class="modal-close" id="activityEditModalClose" aria-label="Close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" id="activityEditId">
                        <div class="form-group">
                            <label for="activityEditState">State</label>
                            <select id="activityEditState" class="form-control">
                                <option value="saved">saved</option>
                                <option value="archived">archived</option>
                                <option value="approved">approved</option>
                                <option value="live">live</option>
                            </select>
                        </div>
                        <div class="form-group" id="activityEditOptionsGroup">
                            <label>Variation Offer IDs</label>
                            <div id="activityEditOptionsList"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-small" id="activityEditModalCancel">Cancel</button>
                        <button type="button" class="btn btn-primary btn-small" id="activityEditSaveBtn">Save</button>
                    </div>
                </div>
            </div>
            <section class="card">
                <div class="card-header">
                    <h2>Offers</h2>
                </div>
                <div class="card-body">
                    <div id="myOffersList" class="content-list content-list-with-ws"></div>
                </div>
            </section>
        </div>
        <!-- /tab-my-content -->
    </div>

    <script src="js/utils.js"></script>
    <script src="js/offers.js"></script>
    <script src="js/activities.js"></script>
    <script src="js/my-content.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
